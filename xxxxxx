- name: oauth-proxy
  args:
  - --skip-auth-regex=^/api/.*  # Skip auth for API paths
  - --pass-bearer-token=true    # Pass bearer tokens through



# Example for a deployment that should accept tokens
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-api
spec:
  template:
    spec:
      containers:
      - name: api
        env:
        - name: OAUTH_PROXY_ENABLED
          value: "false"  # Disable OAuth proxy if present


# In your deployment/pod spec
containers:
- name: oauth-proxy
  args:
  - --upstream=http://localhost:8080/
  - --provider=openshift
  - --openshift-service-account=your-sa
  - --cookie-secret=SECRET
  - --skip-auth-regex=^/api/.*$  # Skip OAuth for API endpoints
  - --pass-bearer-token=true
